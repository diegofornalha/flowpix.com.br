(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[526],{4963:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[account]/drops/[dropID]",function(){return r(9079)}])},9079:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return z}});var n=r(4051),a=r.n(n),o=r(5893),c=r(1163),s=r(7294),i=r(8100),u=r(8597),l=r(448),d=r(6513),f=r(3776),p=r.n(f),h=r(4480),m=r(5496),x=r(2618),b=r(5023),v=r(9099);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t,r,n,a,o,c){try{var s=e[o](c),i=s.value}catch(u){return void r(u)}s.done?t(i):Promise.resolve(i).then(n,a)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){w(o,n,a,c,s,"next",e)}function s(e){w(o,n,a,c,s,"throw",e)}c(void 0)}))}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(i){s=!0,a=i}finally{try{c||null==r.return||r.return()}finally{if(s)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=function(){var e=g(a().mark((function e(t,r,n){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={address:r.account,contractName:r.contractName,path:{balance:"/public/".concat(r.balancePath.identifier)}},e.next=3,(0,v.qA)(o,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();function S(e){var t=e.drop,r=e.manager,n=(e.claimStatus,(0,s.useState)(new(p())(0))),c=(n[0],n[1]),u=(0,s.useState)(""),l=(u[0],u[1],j((0,h.FV)(m.lo),2)[1],j((0,h.FV)(m.VQ),2)[1],j((0,h.FV)(m.Z9),2)[1]),d=j((0,h.FV)(m.ys),2)[1],f=j((0,h.FV)(m.xr),2),v=f[0],y=f[1],w=j((0,h.FV)(m.cY),2)[1],S=(0,i.kY)().mutate,I=(0,i.ZP)(t&&r?["balanceFetcher",t.tokenInfo,r]:null,k),E=I.data;I.error;return(0,s.useEffect)((function(){E&&c(E)}),[E]),(0,o.jsxs)("div",{className:"w-full flex flex-col",children:[(0,o.jsx)("label",{className:"px-3 text-2xl font-bold font-flow",children:"MANAGE"}),(0,o.jsx)("div",{className:"w-full mt-5 mb-10 bg-white overflow-hidden ring-1 ring-black ring-opacity-5 rounded-2xl shadow p-6 flex flex-col gap-y-2 items-center justify-start",children:(0,o.jsxs)("div",{className:"w-full flex flex-col gap-y-3 sm:flex-row sm:justify-between sm:gap-x-3",children:[(0,o.jsx)("button",{type:"button",className:(0,b.AK)(v||t&&t.isEnded?"bg-drizzle-green-light":"bg-drizzle-green hover:bg-drizzle-green-dark","rounded-xl min-h-[60px] basis-1/3 px-3 text-base font-medium shadow text-black"),disabled:v||t&&t.isEnded,onClick:g(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,(0,x.eK)(t.dropID,y,w);case 3:S(["claimStatusFetcher",t.dropID,r,r]),S(["dropFetcher",t.dropID,r]);case 5:case"end":return e.stop()}}),e)}))),children:t&&t.isPaused?"RESUME":"PAUSE"}),(0,o.jsx)("button",{type:"button",className:(0,b.AK)(v||t&&t.isEnded?"bg-red-400/60":"bg-red-400 hover:bg-red-500","rounded-xl min-h-[60px] basis-1/3 px-3 text-base font-medium shadow text-black"),disabled:v||t&&t.isEnded,onClick:g(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!1),d({content:"End DROP will send all remaining tokens back to your account, the rest of the eligible users will not be able to claim their rewards, and nobody can recover it",actionTitle:"End",action:g(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,(0,x.CM)(t.dropID,t.tokenInfo.account,t.tokenInfo.receiverPath.identifier,y,w);case 3:S(["claimStatusFetcher",t.dropID,r,r]),S(["dropFetcher",t.dropID,r]);case 5:case"end":return e.stop()}}),e)})))}),l(!0),e.abrupt("return");case 4:case"end":return e.stop()}}),e)}))),children:"END"}),(0,o.jsx)("button",{type:"button",className:(0,b.AK)(v?"bg-red-400/60":"bg-red-400 hover:bg-red-500","rounded-xl min-h-[60px] basis-1/3 px-3 text-base font-medium shadow text-black"),disabled:v,onClick:g(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(!1),d({content:"Delete DROP will send all remaining tokens back to your account, and no one can access the DROP again",actionTitle:"Delete",action:g(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,(0,x.rB)(t.dropID,t.tokenInfo.account,t.tokenInfo.receiverPath.identifier,y,w);case 3:S(["dropFetcher",t.dropID,r]);case 4:case"end":return e.stop()}}),e)})))}),l(!0);case 3:case"end":return e.stop()}}),e)}))),children:"DELETE"})]})})]})}var I=r(3947),E=r(7027);function N(e){var t=e.drop,r=e.claimStatus,n=e.user,a=e.host,c=(0,s.useState)(!1),i=c[0],f=c[1],p=(0,s.useState)(""),h=p[0],m=p[1];return(0,o.jsxs)(o.Fragment,{children:[t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"flex justify-center mb-10",children:(0,o.jsx)(d.Z,{isPreview:!1,drop:t,claimStatus:r,user:n,setShowClaimedModal:f,setClaimedAmountInfo:m})}),(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,o.jsx)(I.Z,{drop:t}),n&&n.loggedIn&&r&&n.addr==a?(0,o.jsx)(S,{drop:t,manager:a,claimStatus:r}):null]})]}):(0,o.jsx)("div",{className:"flex h-[200px] mt-10 justify-center",children:(0,o.jsx)(u.s,{size:50,thickness:180,speed:100,color:"#00d588",secondaryColor:"#e2e8f0"})}),(0,o.jsx)(E.Z,{}),(0,o.jsx)(l.Z,{open:i,setOpen:f,rewardInfo:h,title:"Claimed Successfully!"})]})}var A=r(614),P=r(7463);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(e,t,r,n,a,o,c){try{var s=e[o](c),i=s.value}catch(u){return void r(u)}s.done?t(i):Promise.resolve(i).then(n,a)}function C(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){F(o,n,a,c,s,"next",e)}function s(e){F(o,n,a,c,s,"throw",e)}c(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(i){s=!0,a=i}finally{try{c||null==r.return||r.return()}finally{if(s)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=function(){var e=C(a().mark((function e(t,r,n){var o,c,s,i,u,l,d,f,p,h,m,x,b,y;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.sM)(r,n);case 2:return o=e.sent,e.next=5,(0,P.jb)([n]);case 5:if(c=e.sent,o.host={address:n,domains:c[n]},!((s=Object.keys(o.claimedRecords)).length<100)){e.next=31;break}return e.next=11,(0,P.jb)(s);case 11:for(i=e.sent,u={},l=!0,d=!1,f=void 0,e.prev=14,p=Object.entries(o.claimedRecords)[Symbol.iterator]();!(l=(h=p.next()).done);l=!0)m=O(h.value,2),x=m[0],b=m[1],(y=Object.assign({},b)).domains=i[x],u[x]=y;e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),d=!0,f=e.t0;case 22:e.prev=22,e.prev=23,l||null==p.return||p.return();case 25:if(e.prev=25,!d){e.next=28;break}throw f;case 28:return e.finish(25);case 29:return e.finish(22);case 30:o.claimedRecords=u;case 31:return e.abrupt("return",o);case 32:case"end":return e.stop()}}),e,null,[[14,18,22,30],[23,,25,29]])})));return function(t,r,n){return e.apply(this,arguments)}}(),R=function(){var e=C(a().mark((function e(t,r,n,o){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.B7)(r,n,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}();function z(e){var t=(0,c.useRouter)().query,r=t.account,n=t.dropID,a=(0,s.useState)(null),l=a[0],d=a[1];(0,s.useEffect)((function(){r&&((0,b.KO)(r)?d(r):(0,P.nn)([r]).then((function(e){e[r]?d(e[r]):d(r)})).catch(console.error))}),[r]);var f=e.user,p=(0,s.useState)(null),h=p[0],m=p[1],x=(0,s.useState)(null),v=x[0],y=x[1],w=(0,i.ZP)(n&&l?["dropFetcher",n,l]:null,_),g=w.data,j=w.error,k=(0,i.ZP)(n&&l&&f&&f.loggedIn?["claimStatusFetcher",n,l,f.addr]:null,R),S=k.data,I=k.error;return(0,s.useEffect)((function(){g&&m(g),S&&y(S)}),[g,S]),j&&400===j.statusCode?(0,o.jsx)(A.default,{title:"DROP may not exist or deleted"}):I&&400===I.statusCode?(0,o.jsx)(A.default,{title:"Raffle may not exist or deleted"}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"container mx-auto max-w-[920px] min-w-[380px] px-6",children:h?(0,o.jsx)(N,{drop:h,claimStatus:v,user:f,host:l}):(0,o.jsx)("div",{className:"flex h-[200px] mt-10 justify-center",children:(0,o.jsx)(u.s,{size:50,thickness:180,speed:100,color:"#00d588",secondaryColor:"#e2e8f0"})})})})}}},function(e){e.O(0,[728,915,3,958,774,888,179],(function(){return t=4963,e(e.s=t);var t}));var t=e.O();_N_E=t}]);