(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{7069:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[account]/raffles/[raffleID]",function(){return r(1273)}])},1273:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return U}});var n=r(4051),a=r.n(n),l=r(5893),s=r(1163),i=r(7294),o=r(8100),c=r(8597),f=r(614),u=r(4410),d=r(448),x=r(5448),m=r(7027),h=r(4749),p=r(1214),b=r(3973),y=r(3519),g=r(5023),w=r(5985),v=r(5496),j=r(4480);function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);s=!0);}catch(o){i=!0,a=o}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){var t=e.raffle,r=k((0,j.FV)(v.$F),1)[0],n=(0,i.useState)(1),a=n[0],s=n[1],o=t?function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var l,s=Object.entries(e.winners)[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var i=k(l.value,2),o=(i[0],i[1]);t.push(o)}}catch(c){n=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(n)throw a}}return t}(t):[];return(0,l.jsxs)("div",{className:"w-full flex flex-col",children:[(0,l.jsx)("label",{className:"px-3 text-2xl font-bold font-flow",children:"WINNERS"}),o.length>0?(0,l.jsxs)("div",{className:"w-full p-4 flex flex-col mb-10",children:[(0,l.jsx)("div",{className:"-my-2 -mx-4 overflow-x-auto",children:(0,l.jsx)("div",{className:"inline-block min-w-full py-2 align-middle px-1",children:(0,l.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Winner"}),(0,l.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Reward Token ID"}),(0,l.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Claim Status"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:(0,g.qX)(o,a,10).map((function(e,t){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-3.5 pl-4 pr-3 text-left text-sm sm:pl-6",children:(0,l.jsx)("a",{href:"".concat(w.Z.flowscanURL,"/account/").concat(e.address),className:"block font-medium text-gray-900 break-words max-w-[200px]",target:"_blank",rel:"noopener noreferrer",children:(0,g.fw)(e,r)})}),(0,l.jsx)("td",{className:"whitespace-nowrap px-3 py-3.4 text-sm text-gray-500",children:(0,l.jsx)("div",{className:"text-gray-500",children:e.rewardTokenIDs.map((function(e){return"#".concat(e)})).join(", ")})}),(0,l.jsx)("td",{className:"whitespace-nowrap px-3 py-3.4 text-sm text-gray-500",children:(0,l.jsx)("label",{className:"inline-flex rounded-full px-2 text-xs font-semibold leading-5 ".concat(e.isClaimed?"text-green-800 bg-green-100":"text-yellow-800 bg-yellow-100"),children:e.isClaimed?"CLAIMED":"UNCLAIMED"})})]},t)}))})]})})})}),o.length>10?(0,l.jsxs)("div",{className:"mt-2 flex justify-between",children:[(0,l.jsx)("button",{className:"bg-gray-50 p-2 rounded-full overflow-hidden shadow ring-1 ring-black ring-opacity-5",disabled:1==a,onClick:function(){1!=a&&s(a-1)},children:(0,l.jsx)(b.Z,{className:"h-5 w-5 ".concat(1==a?"text-gray-400":"text-black")})}),(0,l.jsx)("button",{className:"bg-gray-50 h-9 w-9 rounded-full overflow-hidden shadow ring-1 ring-black ring-opacity-5",disabled:!0,children:a}),(0,l.jsx)("button",{className:"bg-gray-50 p-2 rounded-full overflow-hidden shadow ring-1 ring-black ring-opacity-5",disabled:10*a>=o.length,onClick:function(){10*a>=o.length||s(a+1)},children:(0,l.jsx)(y.Z,{className:"h-5 w-5 ".concat(10*a>=o.length?"text-gray-400":"text-black")})})]}):null]}):(0,l.jsx)("div",{className:"w-full flex mb-10 items-center justify-center",children:(0,l.jsx)("label",{className:"mt-10 leading-10 font-flow font-medium text-base text-gray-500",children:"This Raffle has not been drawn yet"})})]})}r(3776);var I=r(6887);function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t,r,n,a,l,s){try{var i=e[l](s),o=i.value}catch(c){return void r(c)}i.done?t(o):Promise.resolve(o).then(n,a)}function D(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function s(e){C(l,n,a,s,i,"next",e)}function i(e){C(l,n,a,s,i,"throw",e)}s(void 0)}))}}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);s=!0);}catch(o){i=!0,a=o}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e){var t=e.raffle,r=e.manager,n=e.claimStatus,s=E((0,j.FV)(v.Z9),2)[1],i=E((0,j.FV)(v.ys),2)[1],c=E((0,j.FV)(v.xr),2),f=c[0],u=c[1],d=E((0,j.FV)(v.cY),2)[1],x=(0,o.kY)().mutate,m=function(e,t){return!!t&&!!e&&"3"===e.availability.status.rawValue}(n,t);return(0,l.jsxs)("div",{className:"w-full flex flex-col",children:[(0,l.jsx)("label",{className:"px-3 text-2xl font-bold font-flow",children:"MANAGE"}),(0,l.jsxs)("div",{className:"w-full mt-4 mb-10 bg-white overflow-hidden ring-1 ring-black ring-opacity-5 rounded-2xl shadow p-6 flex flex-col gap-y-2 items-center justify-start",children:[(0,l.jsx)("div",{className:"flex w-full",children:(0,l.jsxs)("label",{className:"px-1 text-md font-flow leading-6 mb-2",children:["Only available in\xa0",(0,l.jsx)("span",{className:"inline-flex rounded-full px-2 text-xs font-semibold leading-6 text-yellow-800 bg-yellow-100",children:"DRAWING"})," stage"]})}),(0,l.jsxs)("div",{className:"w-full flex flex-col gap-y-3 sm:flex-row sm:justify-between sm:gap-x-3",children:[(0,l.jsx)("button",{type:"button",className:(0,g.AK)(f||!m?"bg-drizzle-green-light":"bg-drizzle-green hover:bg-drizzle-green-dark","rounded-xl min-h-[60px] basis-1/2 px-3 text-base font-medium shadow text-black"),disabled:f||!m,onClick:D(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,(0,I.ii)(t.raffleID,u,d);case 3:x(["raffleClaimStatusFetcher",t.raffleID,r.address,r.address]),x(["raffleFetcher",t.raffleID,r.address]);case 5:case"end":return e.stop()}}),e)}))),children:"DRAW"}),(0,l.jsx)("button",{type:"button",className:(0,g.AK)(f||!m?"bg-drizzle-green-light":"bg-drizzle-green hover:bg-drizzle-green-dark","rounded-xl min-h-[60px] basis-1/2 px-3 text-base font-medium shadow text-black"),disabled:f||!m,onClick:D(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,(0,I.oB)(t.raffleID,u,d);case 3:x(["raffleClaimStatusFetcher",t.raffleID,r.address,r.address]),x(["raffleFetcher",t.raffleID,r.address]);case 5:case"end":return e.stop()}}),e)}))),children:"BATCH DRAW"})]}),(0,l.jsx)("div",{className:"w-full bg-gray-100 h-[1px] mt-3 mb-3"}),(0,l.jsxs)("div",{className:"w-full flex flex-col gap-y-3 sm:flex-row sm:justify-between sm:gap-x-3",children:[(0,l.jsx)("button",{type:"button",className:(0,g.AK)(f||t&&t.isEnded?"bg-drizzle-green-light":"bg-drizzle-green hover:bg-drizzle-green-dark","rounded-xl min-h-[60px] basis-1/3 px-3 text-base font-medium shadow text-black"),disabled:f||t&&t.isEnded,onClick:D(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,(0,I.eK)(t.raffleID,u,d);case 3:x(["raffleClaimStatusFetcher",t.raffleID,r.address,r.address]),x(["raffleFetcher",t.raffleID,r.address]);case 5:case"end":return e.stop()}}),e)}))),children:t&&t.isPaused?"RESUME":"PAUSE"}),(0,l.jsx)("button",{type:"button",className:(0,g.AK)(f||t&&t.isEnded?"bg-red-400/60":"bg-red-400 hover:bg-red-500","rounded-xl min-h-[60px] basis-1/3 px-3 text-base font-medium shadow text-black"),disabled:f||t&&t.isEnded,onClick:D(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!1),i({content:"End Raffle will send all remaining NFTs back to your account, all functions of the Raffle will be stop, and nobody can recover it",actionTitle:"End",action:D(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,(0,I.mU)(t.raffleID,t.nftInfo.contractName,t.nftInfo.contractAddress,u,d);case 3:x(["raffleClaimStatusFetcher",t.raffleID,r.address,r.address]),x(["raffleFetcher",t.raffleID,r.address]);case 5:case"end":return e.stop()}}),e)})))}),s(!0),e.abrupt("return");case 4:case"end":return e.stop()}}),e)}))),children:"END"}),(0,l.jsx)("button",{type:"button",className:(0,g.AK)(f?"bg-red-400/60":"bg-red-400 hover:bg-red-500","rounded-xl min-h-[60px] basis-1/3 px-3 text-base font-medium shadow text-black"),disabled:f,onClick:D(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!1),i({content:"Delete Raffle will send all remaining NFTs back to your account, and no one can access the Raffle again",actionTitle:"Delete",action:D(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,(0,I.DE)(t.raffleID,t.nftInfo.contractName,t.nftInfo.contractAddress,u,d);case 3:x(["raffleFetcher",t.raffleID,r.address]);case 4:case"end":return e.stop()}}),e)})))}),s(!0);case 3:case"end":return e.stop()}}),e)}))),children:"DELETE"})]})]})]})}function z(e){var t=e.raffle,r=e.claimStatus,n=e.user,a=e.host,s=(0,i.useState)(!1),o=s[0],f=s[1],u=(0,i.useState)(!1),b=u[0],y=u[1],g=(0,i.useState)(""),w=g[0],v=g[1];return(0,l.jsxs)(l.Fragment,{children:[t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex justify-center mb-10",children:(0,l.jsx)(x.Z,{isPreview:!1,raffle:t,claimStatus:r,user:n,setShowClaimedModal:f,setShowRegisteredModal:y,setRewardInfo:v})}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)(p.Z,{isPreview:!1,raffle:t}),(0,l.jsx)(h.Z,{raffle:t}),(0,l.jsx)(S,{isPreview:!1,raffle:t}),n&&n.loggedIn&&r&&n.addr==a?(0,l.jsx)(F,{raffle:t,manager:n,claimStatus:r}):null]})]}):(0,l.jsx)("div",{className:"flex h-[200px] mt-10 justify-center",children:(0,l.jsx)(c.s,{size:50,thickness:180,speed:100,color:"#00d588",secondaryColor:"#e2e8f0"})}),(0,l.jsx)(m.Z,{}),(0,l.jsx)(d.Z,{open:o,setOpen:f,rewardInfo:w,title:"Claimed Successfully!"}),(0,l.jsx)(d.Z,{open:b,setOpen:y,title:"Registered Successfully!"})]})}var R=r(7463);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t,r,n,a,l,s){try{var i=e[l](s),o=i.value}catch(c){return void r(c)}i.done?t(o):Promise.resolve(o).then(n,a)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function s(e){T(l,n,a,s,i,"next",e)}function i(e){T(l,n,a,s,i,"throw",e)}s(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);s=!0);}catch(o){i=!0,a=o}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=function(){var e=P(a().mark((function e(t,r,n){var l,s,i,o,c,f,d,x,m,h,p,b,y,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.i0)(r,n);case 2:return l=e.sent,e.next=5,(0,R.jb)([n]);case 5:return s=e.sent,l.host={address:n,domains:s[n]},i=Object.keys(l.winners),e.next=10,(0,R.jb)(i);case 10:for(o=e.sent,c={},f=!0,d=!1,x=void 0,e.prev=13,m=Object.entries(l.winners)[Symbol.iterator]();!(f=(h=m.next()).done);f=!0)p=_(h.value,2),b=p[0],y=p[1],(g=Object.assign({},y)).domains=o[b],c[b]=g;e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),d=!0,x=e.t0;case 21:e.prev=21,e.prev=22,f||null==m.return||m.return();case 24:if(e.prev=24,!d){e.next=27;break}throw x;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return l.winners=c,e.abrupt("return",l);case 31:case"end":return e.stop()}}),e,null,[[13,17,21,29],[22,,24,28]])})));return function(t,r,n){return e.apply(this,arguments)}}(),M=function(){var e=P(a().mark((function e(t,r,n,l){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.B7)(r,n,l);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}();function U(e){var t=(0,s.useRouter)().query,r=t.account,n=t.raffleID,a=(0,i.useState)(null),u=a[0],d=a[1];(0,i.useEffect)((function(){r&&((0,g.KO)(r)?d(r):(0,R.nn)([r]).then((function(e){e[r]?d(e[r]):d(r)})).catch(console.error))}),[r]);var x=e.user,m=(0,i.useState)(null),h=m[0],p=m[1],b=(0,i.useState)(null),y=b[0],w=b[1],v=(0,o.ZP)(n&&u?["raffleFetcher",n,u]:null,Z),j=v.data,N=v.error,k=(0,o.ZP)(n&&u&&x&&x.loggedIn?["raffleClaimStatusFetcher",n,u,x.addr]:null,M),S=k.data;k.error;return(0,i.useEffect)((function(){j&&p(j),S&&w(S)}),[j,S]),N&&400===N.statusCode?(0,l.jsx)(f.default,{title:"Raffle may not exist or deleted"}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"container mx-auto max-w-[920px] min-w-[380px] px-6",children:h?(0,l.jsx)(z,{raffle:h,claimStatus:y,user:x,host:u}):(0,l.jsx)("div",{className:"flex h-[200px] mt-10 justify-center",children:(0,l.jsx)(c.s,{size:50,thickness:180,speed:100,color:"#00d588",secondaryColor:"#e2e8f0"})})})})}}},function(e){e.O(0,[728,915,475,958,774,888,179],(function(){return t=7069,e(e.s=t);var t}));var t=e.O();_N_E=t}]);